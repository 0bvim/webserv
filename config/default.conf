# First server block
server {
    host            127.0.0.1;
    port            8080;
    server_names    example.com www.example.com;
    client_max_size 10M;

    error_pages {
        404 /errors/404.html;
        500 /errors/500.html;
        503 /errors/503.html;
    }

    location /static {
        methods          GET POST DELETE;
        root            /var/www/static;
        directory_list  on;
        index           index.html;
    }

    location /upload {
        methods      POST;
        upload_path  /var/www/uploads;
        client_max_size 20M;  # Override global setting
    }

    location /api {
        methods         GET POST;
        cgi            on;
        cgi_extension  .php;
        cgi_path      /usr/bin/php-cgi;
        root          /var/www/api;
    }
}

# Second server block (different port)
server {
    host         127.0.0.1;
    port         8081;
    server_names api.example.com;
    client_max_size 5M;

    location / {
        methods        GET;
        root          /var/www/html;
        directory_list off;
        index         index.html;
    }
}
